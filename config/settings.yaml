nostr:
  relay_url: "wss://communities.nos.social" # URL of the NIP-29 relay to connect to
  # Relay's private key (needed for NIP-29 access - !! HANDLE SECURELY !!)
  # It's better to load this from env var or secrets manager
  # relay_private_key_hex: "relay_private_key_hex_here"

service:
  # Service's own keypair (used for NIP-42 auth if needed, separate from relay's key)
  # Better to load from env var or secrets manager
  # service_private_key_hex: "service_private_key_hex_here"
  listen_kinds: # Kinds to subscribe to
    # Push notification registration events
    - 3079  # Push token registration
    - 3080  # Push token deregistration
    - 3081  # Notification filter upsert
    - 3082  # Notification filter delete

    # Universes-specific events to monitor
    - 1111  # Comments/messages in communities (NIP-22)
    - 4552  # Join requests (moderator notifications)
    - 34551 # Approved members list updates
    - 34552 # Declined members list updates
    - 34553 # Banned members list updates

    # Direct messages
    - 4     # NIP-04 encrypted DMs (legacy)
    - 1059  # NIP-44 gift-wrapped DMs

    # Social interactions
    - 7     # Reactions to posts
    - 9735  # Zaps (optional, for future)

    # Utility
    - 9     # Deletion events
  process_window_days: 7 # How far back to look for missed events on startup
  processed_event_ttl_secs: 604800 # 7 days TTL for processed event IDs

redis:
  url: "redis://127.0.0.1:6379" # Default URL, overridden by REDIS_URL env var if set
  connection_pool_size: 10

apps:
  - name: "nostrpushdemo"
    fcm_project_id: "plur-push-local"
    # K8s: /app/secrets/firebase-nostrpushdemo.json
    # Local: ./firebase-service-account-nostrpushdemo.json
    credentials_path: "/app/secrets/firebase-nostrpushdemo.json"

  - name: "universes"
    fcm_project_id: "universes-2bc44"
    # K8s: /app/secrets/firebase-universes.json
    # Local: ./firebase-service-account-universes.json
    credentials_path: "/app/secrets/firebase-universes.json"

cleanup:
  enabled: true
  interval_secs: 86400 # Run once a day
  token_max_age_days: 90